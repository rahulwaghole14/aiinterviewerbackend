import{h as g,r as a,_,j as e,am as C}from"./index-9DSA42Q2.js";import{y}from"./index-BqtCo74R.js";import{C as L}from"./CustomDropdown-DqAXTwZC.js";import"./index-BUMpm_8V.js";const k=()=>{const v=g(),[t,p]=a.useState([]),[N,o]=a.useState(!0),[h,u]=a.useState(null),[r,f]=a.useState(""),[l,w]=a.useState("all");a.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const s=localStorage.getItem("authToken");if(!s){u("Authentication required");return}const i=await fetch(`${_}/interview_app/api/results/`,{headers:{Authorization:`Token ${s}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch interview sessions");const d=await i.json();p(d.sessions)}catch(s){console.error("Error fetching interview sessions:",s),u(s.message),y.error("Failed to load interview sessions")}finally{o(!1)}},x=s=>s?new Date(s).toLocaleDateString()+" "+new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"N/A",n=s=>s==null?"#6c757d":s>=8?"#28a745":s>=6?"#ffc107":"#dc3545",c=s=>s==null?"N/A":`${s}/10`,b=s=>{switch(s.toLowerCase()){case"scheduled":return"#ffc107";case"completed":return"#28a745";case"expired":return"#dc3545";default:return"#6c757d"}},j=t.filter(s=>{const i=s.candidate_name.toLowerCase().includes(r.toLowerCase())||s.candidate_email.toLowerCase().includes(r.toLowerCase()),d=l==="all"||s.status.toLowerCase()===l;return i&&d}),S=s=>{v(`/interview-results/${s}`)};return N?e.jsx("div",{className:"interview-results-list",children:e.jsxs("div",{className:"loading-container",children:[e.jsx(C,{color:"var(--color-primary)",size:15}),e.jsx("h2",{children:"Loading Interview Sessions..."})]})}):h?e.jsx("div",{className:"interview-results-list",children:e.jsxs("div",{className:"error-container",children:[e.jsx("div",{className:"error-icon",children:"âš ï¸"}),e.jsx("h2",{children:"Error Loading Sessions"}),e.jsx("p",{children:h}),e.jsx("button",{className:"retry-button",onClick:m,children:"Retry"})]})}):e.jsxs("div",{className:"interview-results-list",children:[e.jsxs("div",{className:"list-header",children:[e.jsx("h1",{children:"Interview Results"}),e.jsx("p",{children:"View and analyze interview session results"})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx("div",{className:"search-filter",children:e.jsx("input",{type:"text",placeholder:"Search by candidate name or email...",value:r,onChange:s=>f(s.target.value),className:"search-input"})}),e.jsx("div",{className:"status-filter",children:e.jsx(L,{value:l,options:[{value:"all",label:"All Status"},{value:"scheduled",label:"Scheduled"},{value:"completed",label:"Completed"},{value:"expired",label:"Expired"}],onChange:s=>w(s),placeholder:"All Status"})})]}),e.jsxs("div",{className:"sessions-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.length}),e.jsx("span",{className:"stat-label",children:"Total Sessions"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.filter(s=>s.status==="COMPLETED").length}),e.jsx("span",{className:"stat-label",children:"Completed"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.filter(s=>s.is_evaluated).length}),e.jsx("span",{className:"stat-label",children:"Evaluated"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("span",{className:"stat-number",children:t.filter(s=>s.status==="SCHEDULED").length}),e.jsx("span",{className:"stat-label",children:"Scheduled"})]})]}),j.length===0?e.jsxs("div",{className:"no-sessions",children:[e.jsx("div",{className:"no-sessions-icon",children:"ðŸ“‹"}),e.jsx("h2",{children:"No Interview Sessions Found"}),e.jsx("p",{children:r||l!=="all"?"No sessions match your current filters. Try adjusting your search criteria.":"No interview sessions have been created yet."})]}):e.jsx("div",{className:"sessions-grid",children:j.map(s=>e.jsxs("div",{className:"session-card",children:[e.jsxs("div",{className:"session-header",children:[e.jsxs("div",{className:"candidate-info",children:[e.jsx("h3",{children:s.candidate_name}),e.jsx("p",{children:s.candidate_email})]}),e.jsx("div",{className:"status-badge",style:{backgroundColor:b(s.status)},children:s.status})]}),e.jsxs("div",{className:"session-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Scheduled:"}),e.jsx("span",{children:x(s.scheduled_at)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Completed:"}),e.jsx("span",{children:x(s.completed_at)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Questions:"}),e.jsxs("span",{children:[s.answered_questions,"/",s.total_questions]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Code Submissions:"}),e.jsx("span",{children:s.code_submissions})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Warnings:"}),e.jsx("span",{children:s.warning_count})]})]}),s.is_evaluated&&e.jsxs("div",{className:"evaluation-scores",children:[e.jsx("h4",{children:"Evaluation Scores"}),e.jsxs("div",{className:"scores-row",children:[e.jsxs("div",{className:"score-item",children:[e.jsx("label",{children:"Resume:"}),e.jsx("span",{className:"score-value",style:{color:n(s.resume_score)},children:c(s.resume_score)})]}),e.jsxs("div",{className:"score-item",children:[e.jsx("label",{children:"Answers:"}),e.jsx("span",{className:"score-value",style:{color:n(s.answers_score)},children:c(s.answers_score)})]}),e.jsxs("div",{className:"score-item",children:[e.jsx("label",{children:"Overall:"}),e.jsx("span",{className:"score-value",style:{color:n(s.overall_performance_score)},children:c(s.overall_performance_score)})]})]})]}),e.jsx("div",{className:"session-actions",children:e.jsx("button",{className:"view-results-btn",onClick:()=>S(s.session_id),children:"View Detailed Results"})})]},s.session_id))})]})};export{k as default};
