import{r as s,j as t,a0 as C}from"./index-DasKWjZg.js";import{R as D}from"./index-YPs6-RzR.js";const M=({value:g,options:c,onChange:a,placeholder:y="Select...",className:R="",disabled:d=!1,searchable:r=!1,openAbove:j=!1})=>{const[o,i]=s.useState(!1),[u,E]=s.useState({top:0,left:0,width:0}),[p,f]=s.useState(""),m=s.useRef(null),w=s.useRef(null),h=s.useRef(null);s.useEffect(()=>{if(o&&w.current){const e=w.current.getBoundingClientRect(),n=window.innerHeight,l=Math.min(c.length*40+(r?50:0),300);let v;j||e.bottom+l>n&&e.top>l?v=e.top+window.scrollY-l-4:v=e.bottom+window.scrollY+4,E({top:v,left:e.left+window.scrollX,width:e.width})}},[o,c.length,r,j]),s.useEffect(()=>{const e=n=>{m.current&&!m.current.contains(n.target)&&i(!1)};return o&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o]),s.useEffect(()=>{o&&r&&h.current&&setTimeout(()=>{h.current?.focus()},100)},[o,r]);const S=e=>{a&&typeof a=="function"&&a(e),i(!1),f("")},x=c.find(e=>{const n=String(e.value),l=String(g);return n===l}),N=r&&p?c.filter(e=>e.label.toLowerCase().includes(p.toLowerCase())):c,$=x?x.label:y;return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`custom-dropdown ${R} ${o?"open":""}`,ref:m,children:t.jsxs("button",{ref:w,type:"button",className:`custom-dropdown-button ${o?"open":""}`,onClick:()=>{d||i(!o)},disabled:d,children:[t.jsx("span",{className:`dropdown-selected-text ${x?"":"placeholder"}`,children:$}),t.jsx(C,{className:`dropdown-icon ${o?"open":""}`})]})}),o&&!d&&D.createPortal(t.jsxs("div",{className:"custom-dropdown-menu custom-dropdown-portal",style:{position:"fixed",top:`${u.top}px`,left:`${u.left}px`,width:`${u.width}px`,zIndex:999999,overflow:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",pointerEvents:"auto"},children:[r&&t.jsx("div",{className:"custom-dropdown-search",children:t.jsx("input",{ref:h,type:"text",placeholder:"Search companies...",value:p,onChange:e=>f(e.target.value),onKeyDown:e=>{e.key==="Escape"&&(i(!1),f(""))},className:"custom-dropdown-search-input"})}),t.jsx("div",{className:"custom-dropdown-options",children:N.length>0?N.map(e=>t.jsx("button",{type:"button",className:`custom-dropdown-item ${String(g)===String(e.value)?"active":""}`,onMouseDown:n=>{n.preventDefault(),n.stopPropagation(),S(e.value)},onClick:n=>{n.preventDefault(),n.stopPropagation(),S(e.value)},children:e.label},e.value)):t.jsx("div",{className:"custom-dropdown-no-results",children:"No companies found"})})]}),document.body)]})};export{M as C};
