import{_ as f,i as Ie,P as ke,a as v,af as Te,r as c,j as a,a0 as Me,ag as k,ah as T,ai as j,aj as B,a1 as Pe,Y as De}from"./index-DasKWjZg.js";import{D as Oe}from"./DataTable-BxlKcMgp.js";import{C as Le}from"./ContextMenu-ChSNT9y0.js";import{C as me}from"./CustomDropdown-CQFqCwwS.js";import"./index-YPs6-RzR.js";const He={auth:{register:`${f}/api/auth/register/`}},aa=()=>{const l=Ie(),g=ke(),se=v(e=>e.search?.searchTerm||""),y=v(e=>e.user?.user||null),d=y?.role,M=y?.company_name,V=v(e=>e.companies?.companies||[]),pe=v(e=>e.hiringAgencies?.hiringAgencies||[]),he=v(e=>e.recruiters?.recruiters||[]),fe=v(e=>e.admin?.admins||[]),H=v(e=>e.companies?.status||"idle"),re=v(e=>e.hiringAgencies?.status||"idle"),te=v(e=>e.recruiters?.status||"idle"),ie=v(e=>e.admin?.status||"idle"),[ge,ye]=Te(),[t,we]=c.useState(()=>{const e=ge.get("tab");if(e)return e;const n=localStorage.getItem("hiringAgencyActiveTab");return n||"Recruiter"}),[E,G]=c.useState(!1),W=c.useRef(null),[P,le]=c.useState({visible:!1,x:0,y:0,rowData:null,rowIndex:null});c.useEffect(()=>{const e=n=>{W.current&&!W.current.contains(n.target)&&G(!1)};return E&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[E]);const[r,U]=c.useState({username:"",full_name:"",email:"",password:"",role:"",name:"",description:"",is_active:!0,first_name:"",last_name:"",phone_number:"",linkedin_url:"",company_name:d==="COMPANY"?M:"",company_id:d==="COMPANY"&&(y?.company_id||y?.id)||""}),[D,X]=c.useState(!1);c.useEffect(()=>{},[D]),c.useEffect(()=>{},[r]);const[Y,S]=c.useState(null),[oe,x]=c.useState(null),[ce,K]=c.useState(!1),[q,Q]=c.useState(null),[z,Ue]=c.useState(null),[Z,Ye]=c.useState("asc"),[qe,ee]=c.useState(""),[F,R]=c.useState(!0),[_e,ae]=c.useState(!1),A=(e=>{const n=String(e||"").toLowerCase().trim();return n==="admin"?["Recruiter","Hiring Agency","Company","Admin"]:n==="company"?["Recruiter","Hiring Agency"]:n==="hiring_agency"?["Recruiter"]:[]})(d),be=(e,n,i)=>{e.preventDefault(),e.stopPropagation(),le({visible:!0,x:e.clientX,y:e.clientY,rowData:n,rowIndex:i})},ve=(e,n,i)=>{e==="edit"?(S(n.id),x({...n})):e==="delete"&&(Q(n.id),K(!0))},Ce=()=>{le({visible:!1,x:0,y:0,rowData:null,rowIndex:null})};(e=>{const n=e?.toUpperCase();return n==="ADMIN"?[{value:"ADMIN",label:"Admin"},{value:"COMPANY",label:"Company"},{value:"Hiring Agency",label:"Hiring Agency"},{value:"RECRUITER",label:"Recruiter"}]:n==="COMPANY"?[{value:"Hiring Agency",label:"Hiring Agency"},{value:"RECRUITER",label:"Recruiter"}]:n==="HIRING_AGENCY"?[{value:"RECRUITER",label:"Recruiter"}]:[]})(d);const J=e=>{we(e),ye({tab:e}),localStorage.setItem("hiringAgencyActiveTab",e)};c.useEffect(()=>{if(A.length>0&&!A.includes(t)){const e=A[0];J(e)}},[d,A,t]),c.useEffect(()=>{U({username:"",full_name:"",email:"",password:"",role:"",name:"",description:"",is_active:!0,first_name:"",last_name:"",phone_number:"",linkedin_url:"",company_name:d==="COMPANY"?M:"",company_id:d==="COMPANY"&&(y?.company_id||y?.id)||""})},[t,d,M,y]),c.useEffect(()=>{const e=localStorage.getItem("searchHighlight");if(e)try{const n=JSON.parse(e);(n.type==="Hiring Agencies"||n.type==="Companies")&&(n.tab&&A.includes(n.tab)&&J(n.tab),localStorage.removeItem("searchHighlight"))}catch{}},[A]);const de=()=>{switch(t){case"Recruiter":return"Add New Recruiter";case"Hiring Agency":return"Add New Agency";case"Company":return"Add New Company";case"Admin":return"Add New Admin";default:return"Add New User"}},xe=()=>{switch(t){case"Company":return[{field:"name",header:"Name",width:"20%",editable:!0},{field:"email",header:"Email",width:"20%",editable:!0},{field:"description",header:"Description",width:"30%",editable:!0},{field:"is_active",header:"Status",width:"15%",type:"select",options:[{value:"true",label:"Active"},{value:"false",label:"Inactive"}],parseFromEdit:e=>e==="true",formatForEdit:e=>e?"true":"false",render:e=>a.jsx("span",{className:"status-cell","data-status":e?"active":"inactive",children:e?"Active":"Inactive"}),editable:!0}];case"Hiring Agency":return[{field:"first_name",header:"First Name",width:"12%",editable:!0},{field:"last_name",header:"Last Name",width:"12%",editable:!0},{field:"email",header:"Email",width:"18%",editable:!0},{field:"phone_number",header:"Phone",width:"12%",editable:!0},{field:"company_name",header:"Company",width:"15%",editable:!0},{field:"role",header:"Role",width:"12%",editable:!1,render:e=>e||"-"},{field:"linkedin_url",header:"LinkedIn",width:"15%",editable:!0},{field:"status",header:"Status",width:"10%",type:"select",editable:!0,options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],parseFromEdit:e=>e,formatForEdit:e=>e,render:e=>a.jsx("span",{className:"status-cell","data-status":e?.toLowerCase(),children:e||"N/A"})}];case"Recruiter":case"Admin":default:return[{field:"full_name",header:"Full Name",width:"25%",editable:!0,render:(e,n)=>e||`${n.first_name||""} ${n.last_name||""}`.trim()||n.name||n.username||"-"},{field:"email",header:"Email",width:"25%",editable:!0},{field:"company_name",header:"Company",width:"20%",editable:!1},{field:"role",header:"Role",width:"15%",editable:!1,render:e=>e||"-"},{field:"is_active",header:"Active",width:"10%",type:"select",editable:!0,options:[{value:"true",label:"Active"},{value:"false",label:"Inactive"}],parseFromEdit:e=>e==="true",formatForEdit:e=>e?"true":"false",render:e=>a.jsx("span",{className:"status-cell","data-status":e?"active":"inactive",children:e?"Active":"Inactive"})}]}};c.useEffect(()=>{if(!y){R(!1);return}ee(""),R(!0);const e=String(d||"").toLowerCase().trim().replace(/ /g,"_");if(!["admin","company","hiring_agency"].includes(e)){ee("You do not have permission to access this page."),R(!1);return}(async()=>{try{["admin","company"].includes(e)&&re==="idle"&&await l(T()).unwrap(),["admin","company","hiring_agency"].includes(e)&&te==="idle"&&await l(k()),e==="admin"?(H==="idle"&&await l(j()),ie==="idle"&&await l(B())):e==="company"&&H==="idle"&&await l(j())}catch{ee("An error occurred while loading data.")}finally{R(!1)}})()},[y,d,l,re,te,H,ie]);const $=[...(()=>{switch(t){case"Recruiter":return(he||[]).map(s=>{const o=V.find(w=>String(w.id)===String(s.company)),p=o?o.name:`Company ID: ${s.company}`;return{id:s.id,full_name:s.full_name,email:s.email,company_name:p,role:s.role||s.userType,is_active:s.is_active}});case"Hiring Agency":return(pe||[]).map(s=>({...s,status:s.is_active?"Active":"Inactive"}));case"Company":return(V||[]).map(s=>({id:s.id,name:s.name,email:s.email,description:s.description,is_active:s.is_active,status:s.is_active?"Active":"Inactive"}));case"Admin":return fe||[];default:return[]}})().filter(e=>d==="COMPANY"?e.company_name?.toLowerCase()===M?.toLowerCase():!0)].sort((e,n)=>{if(se){const o=se.toLowerCase(),p=ne=>{let O=0;const L=(b,C="")=>{Object.entries(b||{}).forEach(([I,h])=>{if(h==null)return;let N;if(typeof h=="object"&&h!==null){L(h,`${C}${I}.`);return}else typeof h=="boolean"?N=h?"true":"false":typeof h=="number"?N=String(h):h instanceof Date?N=h.toLocaleDateString():N=String(h);const ue=N.toLowerCase();ue.includes(o)&&(ue.startsWith(o)?O+=10:O+=5)})};return L(ne),O},w=p(e),_=p(n);if(w!==_)return _-w}if(!z)return 0;const i=e[z],s=n[z];return z==="is_active"&&t==="Company"?i===s?0:Z==="asc"?i?-1:1:i?1:-1:i<s?Z==="asc"?-1:1:i>s?Z==="asc"?1:-1:0});c.useEffect(()=>{const e=document.querySelector(".add-agency-modal-overlay");e&&(D?e.classList.add("show"):e.classList.remove("show"))},[D]);const m=e=>{const{name:n,value:i}=e.target;e.stopPropagation(),U(s=>s[n]===i?s:{...s,[n]:i})},u=e=>{e.stopPropagation()},Ae=async e=>{e&&e.preventDefault&&e.preventDefault();let n="",i={},s=[];switch(t){case"Company":n=`${f}/api/companies/`,i={name:r.name,email:r.email,description:r.description,is_active:r.is_active,password:r.password},s=["name","email"];break;case"Hiring Agency":n=`${f}/api/hiring_agency/`,i={first_name:r.first_name,last_name:r.last_name,email:r.email,phone_number:r.phone_number,linkedin_url:r.linkedin_url,role:"Hiring Agency"},d==="COMPANY"||(i.input_company_name=r.company_name),s=["first_name","last_name","email","phone_number"];break;case"Recruiter":n=`${f}/api/companies/recruiters/create/`;const p=d==="COMPANY"?y?.company_id||y?.id||"":r.company_id;i={username:r.username||r.email,full_name:r.full_name,email:r.email,password:r.password,company_id:p},s=["full_name","email","password"],d!=="COMPANY"&&s.push("company_id");break;case"Admin":n=He.auth.register,i={username:r.username||r.email,email:r.email,full_name:r.full_name,role:"ADMIN",password:r.password},s=["full_name","email","password"];break;default:g.error("Invalid tab selected.");return}const o=s.filter(p=>!r[p]);if(o.length>0){g.error(`Missing required fields: ${o.join(", ")}`);return}try{const p=localStorage.getItem("authToken"),w=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${p}`},body:JSON.stringify(i)});if(!w.ok){const L=await w.text();let b;try{b=JSON.parse(L);const C=[];throw Object.entries(b).forEach(([I,h])=>{I==="message"||I==="detail"||(Array.isArray(h)?h.forEach(N=>C.push(`${I}: ${N}`)):C.push(`${I}: ${h}`))}),b.non_field_errors&&(Array.isArray(b.non_field_errors)?C.push(...b.non_field_errors):C.push(b.non_field_errors)),C.length>0?new Error(C.join("; ")):new Error(b.message||b.detail||"Failed to add user.")}catch{throw L.includes("IntegrityError")?new Error("A user with this username or email already exists. Please use different credentials."):new Error(`Server error (status ${w.status}). Please try again.`)}}const _=await w.json(),ne=t==="Company"?`Company ${_.name} added successfully!`:`User ${_.full_name||_.name||`${_.first_name||""} ${_.last_name||""}`.trim()||"Unknown"} added successfully!`;g.success(ne),X(!1);const O={username:"",full_name:"",email:"",password:"",role:"",name:"",description:"",is_active:!0,first_name:"",last_name:"",phone_number:"",linkedin_url:"",company_name:d==="COMPANY"?M:"",company_id:d==="COMPANY"&&(y?.company_id||y?.id)||""};U(O),t==="Recruiter"?l(k()):t==="Hiring Agency"?l(T()):t==="Company"?l(j()):t==="Admin"&&l(B())}catch(p){g.error(p.message||"Failed to add user")}},je=async()=>{if(q){ae(!0);try{let e="";const n=localStorage.getItem("authToken");switch(t){case"Recruiter":e=`${f}/api/companies/recruiters/${q}/`;break;case"Hiring Agency":e=`${f}/api/hiring_agency/${q}/`;break;case"Company":e=`${f}/api/companies/${q}/`;break;default:throw new Error("Invalid tab for delete operation.")}const i=await fetch(e,{method:"DELETE",headers:{Authorization:`Token ${n}`,"Content-Type":"application/json"}});if(!i.ok){const o=await i.text();throw new Error(`Failed to delete user: ${i.status} - ${o}`)}const s=[];t==="Recruiter"?s.push(l(k())):t==="Hiring Agency"?s.push(l(T())):t==="Company"&&s.push(l(j())),await Promise.all(s),g.success("User deleted successfully!")}catch(e){g.error(e.message||"Failed to delete user")}finally{ae(!1),K(!1),Q(null)}}},Ne=()=>{K(!1),Q(null),ae(!1)},Ee=async e=>{if(!e||!e.id)throw new Error("Invalid data provided for update");const n=$.find(s=>s.id===e.id);if(!Object.keys(e).some(s=>{if(s==="status"){const o=e[s]?.toLowerCase()==="active";return n.is_active!==o}return s==="full_name"?n.full_name!==e[s]:n[s]!==e[s]})){g.info("No changes detected.");return}try{let s="",o={};const p=localStorage.getItem("authToken");switch(t){case"Recruiter":s=`${f}/api/companies/recruiters/${e.id}/`,o={new_full_name:e.full_name||e.name,new_email:e.email,is_active:e.is_active!==void 0?e.is_active:e.status?.toLowerCase()==="active"};break;case"Hiring Agency":s=`${f}/api/hiring_agency/${e.id}/`,o={first_name:e.first_name,last_name:e.last_name,email:e.email,phone_number:e.phone_number,linkedin_url:e.linkedin_url,is_active:e.status?.toLowerCase()==="active"};break;case"Company":s=`${f}/api/companies/${e.id}/`,o={name:e.name,email:e.email,description:e.description,is_active:e.is_active!==void 0?e.is_active:e.status?.toLowerCase()==="active"};break;case"Admin":s=`${f}/api/admins/${e.id}/`,o={name:e.name,email:e.email,is_active:e.status?.toLowerCase()==="active"};break;default:throw new Error("Invalid user type")}const w=await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Token ${p}`},body:JSON.stringify(o)}),_=await w.json().catch(()=>({}));if(!w.ok)throw new Error(_.detail||"Failed to update user");t==="Recruiter"?l(k()):t==="Hiring Agency"?l(T()):t==="Company"?l(j()):t==="Admin"&&l(B()),g.success("User updated successfully!")}catch(s){throw g.error(s.message||"Failed to update user"),s}},Se=async e=>{if(!e)throw new Error("No user ID provided");try{let n="";const i=localStorage.getItem("authToken");switch(t){case"Recruiter":n=`${f}/api/companies/recruiters/${e}/`;break;case"Hiring Agency":n=`${f}/api/hiring_agency/${e}/`;break;case"Company":n=`${f}/api/companies/${e}/`;break;default:throw new Error("Invalid tab for delete operation.")}const s=await fetch(n,{method:"DELETE",headers:{Authorization:`Token ${i}`,"Content-Type":"application/json"}});if(!s.ok){const p=await s.text();throw new Error(`Failed to delete user: ${s.status} - ${p}`)}const o=[];t==="Recruiter"?o.push(l(k())):t==="Hiring Agency"?o.push(l(T())):t==="Company"&&o.push(l(j())),await Promise.all(o),g.success("User deleted successfully!")}catch(n){throw g.error(n.message||"Failed to delete user"),n}},Fe=()=>{switch(t){case"Company":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"name",children:"Company Name *"}),a.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:m,onClick:u,onFocus:u,onMouseDown:u,required:!0,placeholder:"Enter company name"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,onClick:u,onFocus:u,onMouseDown:u,required:!0,placeholder:"Enter company email"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"description",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:m,onClick:u,onFocus:u,onMouseDown:u,placeholder:"Enter company description",rows:"3"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"is_active",children:"Status"}),a.jsx(me,{value:r.is_active?"true":"false",options:[{value:"true",label:"Active"},{value:"false",label:"Inactive"}],onChange:e=>U(n=>({...n,is_active:e==="true"})),placeholder:"Select Status"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,placeholder:"Enter password (optional)"})]})]});case"Hiring Agency":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"first_name",children:"First Name *"}),a.jsx("input",{type:"text",id:"first_name",name:"first_name",value:r.first_name,onChange:m,required:!0,placeholder:"Enter first name"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"last_name",children:"Last Name *"}),a.jsx("input",{type:"text",id:"last_name",name:"last_name",value:r.last_name,onChange:m,required:!0,placeholder:"Enter last name"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,required:!0,placeholder:"Enter email address"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone_number",children:"Phone Number *"}),a.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:r.phone_number,onChange:m,required:!0,placeholder:"Enter phone number"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"linkedin_url",children:"LinkedIn URL"}),a.jsx("input",{type:"url",id:"linkedin_url",name:"linkedin_url",value:r.linkedin_url,onChange:m,placeholder:"Enter LinkedIn profile URL"})]}),d!=="COMPANY"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"company_name",children:"Company Name"}),a.jsx("input",{type:"text",id:"company_name",name:"company_name",value:r.company_name,onChange:m,placeholder:"Enter company name"})]})]});case"Recruiter":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"full_name",children:"Full Name *"}),a.jsx("input",{type:"text",id:"full_name",name:"full_name",value:r.full_name,onChange:m,onClick:u,onFocus:u,onMouseDown:u,required:!0,placeholder:"Enter full name"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,onClick:u,onFocus:u,onMouseDown:u,required:!0,placeholder:"Enter email address"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password *"}),a.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,onClick:u,onFocus:u,onMouseDown:u,required:!0,placeholder:"Enter password"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"username",children:"Username"}),a.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:m,onClick:u,onFocus:u,onMouseDown:u,placeholder:"Enter username (optional, defaults to email)"})]}),d!=="COMPANY"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"company_id",children:"Company"}),a.jsx(me,{value:r.company_id,options:[{value:"",label:"Select a company"},...V.map(e=>({value:e.id,label:e.name}))],onChange:e=>m({target:{name:"company_id",value:e}}),placeholder:"Select a company"})]})]});case"Admin":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"full_name",children:"Full Name *"}),a.jsx("input",{type:"text",id:"full_name",name:"full_name",value:r.full_name,onChange:m,required:!0,placeholder:"Enter full name"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email *"}),a.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,required:!0,placeholder:"Enter email address"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password *"}),a.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:m,required:!0,placeholder:"Enter password"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"username",children:"Username"}),a.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:m,placeholder:"Enter username (optional, defaults to email)"})]})]});default:return null}},Re=String(d||"").toLowerCase().trim().replace(/ /g,"_");if(!["admin","company","hiring_agency"].includes(Re))return a.jsx("div",{className:"hiring-agencies-container",children:a.jsxs("div",{className:"permission-denied",children:[a.jsx("h2",{children:"Access Denied"}),a.jsx("p",{children:"You do not have permission to access this page."}),a.jsx("p",{children:"Please contact your administrator if you believe this is an error."})]})});const $e=D||ce;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`hiring-agencies-container ${$e?"blur-background":""}`,children:a.jsxs("div",{className:"hiring-agencies-card",children:[a.jsxs("div",{className:"hiring-agencies-tabs-container",children:[a.jsx("div",{className:"hiring-agency-tabs desktop-tabs",children:A.map(e=>a.jsx("button",{className:`hiring-agency-tab ${t===e?"active":""}`,onClick:()=>J(e),disabled:F,children:e},e))}),a.jsxs("div",{className:"mobile-tab-selector",ref:W,children:[a.jsxs("button",{className:`tab-dropdown-button ${E?"open":""}`,onClick:()=>!F&&G(!E),disabled:F,children:[a.jsx("span",{className:"dropdown-selected-text",children:t}),a.jsx(Me,{className:`dropdown-icon ${E?"open":""}`})]}),E&&!F&&a.jsx("div",{className:"tab-dropdown-menu",children:A.map(e=>a.jsx("button",{type:"button",className:`tab-dropdown-item ${t===e?"active":""}`,onClick:()=>{J(e),G(!1)},children:e},e))})]}),["ADMIN","COMPANY"].includes(d)&&a.jsx("button",{className:"add-agency-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),X(!0)},disabled:F,children:de()})]}),a.jsx(Oe,{title:t==="Recruiter"?"Recruiters":t==="Hiring Agency"?"Hiring Agencies":t==="Company"?"Companies":"Admins",columns:xe(),data:$||[],loading:F,actions:["edit","delete"],onEdit:Ee,onAction:(e,n,i)=>{e==="edit"?(S(n.id),x({...n})):e==="delete"&&Se(n.id)},onContextMenuClick:be,editingRow:Y!==null?$.findIndex(e=>e.id===Y):null,editingData:oe,setEditingRow:e=>{if(e===null)S(null),x(null);else{const n=$[e];S(n.id),x({...n})}},setEditingData:x,showRefresh:!0,onRefresh:async()=>{R(!0);try{t==="Recruiter"?await l(k()).unwrap():t==="Hiring Agency"?await l(T()).unwrap():t==="Company"?await l(j()).unwrap():t==="Admin"&&await l(B()).unwrap(),d==="COMPANY"&&H!=="loading"&&await l(j()).unwrap(),g.success("Data refreshed successfully!")}catch{g.error("Failed to refresh data. Please try again.")}finally{R(!1)}},showActions:!0,defaultPageSize:10,pageSizeOptions:[10,25,50,100],editingRow:Y!==null?$.findIndex(e=>e.id===Y):null,editingData:oe,setEditingRow:e=>{if(e===null)S(null),x(null);else{const n=$[e];S(n?.id||null),x(n?{...n}:null)}},setEditingData:x})]})}),a.jsx(Pe,{isOpen:D,onClose:()=>{X(!1)},onSubmit:e=>{Ae(e)},title:de(),submitText:t==="Company"?"Add Company":"Add User",size:"medium",children:Fe()}),a.jsx(De,{isOpen:ce,onClose:Ne,onConfirm:je,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",isLoading:_e}),a.jsx(Le,{visible:P.visible,x:P.x,y:P.y,actions:["edit","delete"],onAction:ve,onClose:Ce,rowData:P.rowData,rowIndex:P.rowIndex})]})};export{aa as default};
