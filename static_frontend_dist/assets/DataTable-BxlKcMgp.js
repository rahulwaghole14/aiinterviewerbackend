import{r as o,j as e,J as Fe,au as ie,av as Re,aw as Te,ax as Oe,Y as Le,ay as Be,k as re,aq as ne,ar as _e,as as ze,at as Je,X as Ke,W as He,ad as Ue,az as Z,aA as c}from"./index-DasKWjZg.js";const Ve=({value:j,onChange:C,placeholder:h="Select time"})=>{const[g,E]=o.useState(9),[$,p]=o.useState(0),[v,S]=o.useState("AM");o.useEffect(()=>{if(j)try{let l,m,k;if(j.includes("M")){const w=j.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);w&&(l=parseInt(w[1]),m=parseInt(w[2]),k=w[3].toUpperCase())}else{const[w,Q]=j.split(":"),P=parseInt(w);m=parseInt(Q),P===0?(l=12,k="AM"):P<12?(l=P,k="AM"):P===12?(l=12,k="PM"):(l=P-12,k="PM")}l&&m!==void 0&&k&&(E(l),p(m),S(k))}catch(l){console.error("Error parsing time value:",l)}},[j]);const f=(l,m,k)=>{const w=`${l}:${m.toString().padStart(2,"0")} ${k}`;C(w)},A=l=>{const m=parseInt(l.target.value);E(m),f(m,$,v)},L=l=>{const m=parseInt(l.target.value);p(m),f(g,m,v)},V=l=>{const m=l.target.value;S(m),f(g,$,m)};return e.jsxs("div",{className:"time-picker-inline edit-input",children:[e.jsx("select",{value:g,onChange:A,className:"time-select hour-select",children:Array.from({length:12},(l,m)=>m+1).map(l=>e.jsx("option",{value:l,children:l},l))}),e.jsx("span",{className:"time-separator",children:":"}),e.jsx("select",{value:$,onChange:L,className:"time-select minute-select",children:[0,15,30,45].map(l=>e.jsx("option",{value:l,children:l.toString().padStart(2,"0")},l))}),e.jsxs("select",{value:v,onChange:V,className:"time-select ampm-select",children:[e.jsx("option",{value:"AM",children:"AM"}),e.jsx("option",{value:"PM",children:"PM"})]})]})},le=({type:j="text",width:C="100%",height:h="1rem",lines:g=1,className:E="",animated:$=!0})=>{const p=()=>`${`skeleton-loader skeleton-${j}`} ${$?"skeleton-animated":""} ${E}`.trim(),v=()=>{switch(j){case"text":return Array.from({length:g},(S,f)=>e.jsx("div",{className:p(),style:{width:f===g-1?"75%":C,height:h,marginBottom:f<g-1?"0.5rem":"0"}},f));case"card":return e.jsxs("div",{className:"skeleton-card",children:[e.jsx("div",{className:`${p()}`,style:{height:"200px",marginBottom:"1rem"}}),e.jsx("div",{className:`${p()}`,style:{height:"1.5rem",width:"80%",marginBottom:"0.5rem"}}),e.jsx("div",{className:`${p()}`,style:{height:"1rem",width:"60%",marginBottom:"0.5rem"}}),e.jsx("div",{className:`${p()}`,style:{height:"1rem",width:"40%"}})]});case"table":return e.jsxs("div",{className:"skeleton-table",children:[e.jsx("div",{className:"skeleton-table-header",children:Array.from({length:4},(S,f)=>e.jsx("div",{className:p(),style:{height:"2rem",width:"25%"}},f))}),Array.from({length:5},(S,f)=>e.jsx("div",{className:"skeleton-table-row",children:Array.from({length:4},(A,L)=>e.jsx("div",{className:p(),style:{height:"3rem",width:"25%",marginRight:L<3?"1rem":"0"}},L))},f))]});case"chart":return e.jsxs("div",{className:"skeleton-chart",children:[e.jsx("div",{className:`${p()}`,style:{height:"1.5rem",width:"60%",marginBottom:"1rem"}}),e.jsx("div",{className:"skeleton-chart-bars",children:Array.from({length:6},(S,f)=>e.jsx("div",{className:`${p()}`,style:{height:`${Math.random()*60+20}%`,width:"12%",marginRight:f<5?"1%":"0"}},f))}),e.jsx("div",{className:"skeleton-chart-labels",children:Array.from({length:6},(S,f)=>e.jsx("div",{className:`${p()}`,style:{height:"0.8rem",width:"12%",marginRight:f<5?"1%":"0"}},f))})]});case"form":return e.jsxs("div",{className:"skeleton-form",children:[Array.from({length:4},(S,f)=>e.jsxs("div",{className:"skeleton-form-group",children:[e.jsx("div",{className:`${p()}`,style:{height:"1rem",width:"30%",marginBottom:"0.5rem"}}),e.jsx("div",{className:`${p()}`,style:{height:"2.5rem",width:"100%"}})]},f)),e.jsx("div",{className:"skeleton-form-actions",children:e.jsx("div",{className:`${p()}`,style:{height:"2.5rem",width:"120px"}})})]});case"avatar":return e.jsx("div",{className:"skeleton-avatar",children:e.jsx("div",{className:`${p()}`,style:{width:h,height:h,borderRadius:"50%"}})});case"button":return e.jsx("div",{className:`${p()}`,style:{height:"2.5rem",width:C,borderRadius:"6px"}});case"image":return e.jsx("div",{className:`${p()}`,style:{width:C,height:h,borderRadius:"8px"}});default:return e.jsx("div",{className:p(),style:{width:C,height:h}})}};return e.jsx("div",{className:"skeleton-container",children:v()})},We=j=>e.jsx(le,{type:"card",...j}),qe=j=>e.jsx(le,{type:"table",...j}),x=(j,C)=>{if(!C||!j)return"";try{const h=C.split(".").reduce((g,E)=>g&&g[E]!==void 0?g[E]:"",j);return h==null?"":typeof h=="object"?Array.isArray(h)?h.join(", "):JSON.stringify(h):h}catch(h){return console.warn("Error getting nested value:",h),""}},oe=({title:j,columns:C=[],data:h=[],loading:g=!1,onRefresh:E,onRowClick:$,actions:p=[],onAction:v,onContextMenuClick:S,showRefresh:f=!0,showActions:A=!0,className:L="",pageSizeOptions:V=[10,20,50,100],defaultPageSize:l=10,actionIcons:m={view:e.jsx(Ue,{}),edit:e.jsx(He,{}),delete:e.jsx(Ke,{}),download:e.jsx(Je,{}),copy:e.jsx(ze,{}),share:e.jsx(_e,{}),save:e.jsx(ne,{}),cancel:e.jsx(re,{}),reset_password:e.jsx(Be,{})},actionLabels:k={view:"View",edit:"Edit",delete:"Delete",download:"Download",copy:"Copy",share:"Share",save:"Save",cancel:"Cancel",reset_password:"Reset Password"},enableRowSelection:w=!1,onSelectionChange:Q,onEdit:P,onDelete:Ge,editingRow:ee,editingData:de,setEditingRow:ce,setEditingData:he})=>{const[b,ue]=o.useState({field:null,direction:null}),D=o.useMemo(()=>{if(!h||!Array.isArray(h))return[];let s=h.map((a,i)=>!a||typeof a!="object"?{}:a);return b.field&&b.direction&&(s=[...s].sort((a,i)=>{const n=x(a,b.field),t=x(i,b.field);if(n==null)return 1;if(t==null)return-1;const y=n==null?"":String(n).toLowerCase(),r=t==null?"":String(t).toLowerCase(),d=Number(n),O=Number(t);return!isNaN(d)&&!isNaN(O)?b.direction==="asc"?d-O:O-d:y<r?b.direction==="asc"?-1:1:y>r?b.direction==="asc"?1:-1:0})),s},[h,b]),_=o.useMemo(()=>C.map(s=>{const a=s.Cell||(({value:i})=>{if(i==null)return"";if(typeof i=="object")try{return JSON.stringify(i)}catch{return"[Object]"}try{return String(i)}catch{return""}});return{...s,Cell:a}}),[C]),[N,q]=o.useState(1),[F,pe]=o.useState(l),[B,fe]=o.useState(0),[K,ge]=o.useState([]),[H,R]=o.useState(null),[me,xe]=o.useState(null),[je,ve]=o.useState({}),z=ee!==void 0?ee:me,u=de||je,G=ce||xe,U=he||ve,[J,Ie]=o.useState([]),[T,I]=o.useState({isOpen:!1,row:null,rowIndex:null}),X=o.useRef(null),be=o.useRef(null);o.useEffect(()=>{if(!D)return;const s=Math.ceil(D.length/F);fe(s||1),N>s&&s>0&&q(1);const a=(N-1)*F,i=a+F;ge(D.slice(a,i))},[D,N,F]);const Ne=o.useCallback(s=>{!s||s==="actions"||ue(a=>a.field===s?a.direction==="asc"?{field:s,direction:"desc"}:a.direction==="desc"?{field:null,direction:null}:{field:s,direction:"asc"}:{field:s,direction:"asc"})},[]),ye=o.useCallback(s=>{if(!s||s==="actions")return e.jsx(ie,{className:"sort-icon"});if(b.field===s){if(b.direction==="asc")return e.jsx(Re,{className:"sort-icon active"});if(b.direction==="desc")return e.jsx(Te,{className:"sort-icon active"})}return e.jsx(ie,{className:"sort-icon"})},[b]);o.useEffect(()=>{const s=n=>{X.current&&!X.current.contains(n.target)&&R(null)},a=n=>{n.key==="Escape"&&R(null)},i=()=>{R(null)};return document.addEventListener("mousedown",s),document.addEventListener("keydown",a),document.addEventListener("scroll",i,!0),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("keydown",a),document.removeEventListener("scroll",i,!0)}},[]),o.useEffect(()=>{const s=a=>{};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const W=s=>{s<1||s>B||q(s)},Ce=s=>{const a=Number(s.target.value);pe(a),q(1)};o.useCallback((s,a)=>{try{if(!s)return!1;let i=JSON.parse(JSON.stringify(s));_.forEach(n=>{if(n.field&&n.field.includes(".")){const[t,y]=n.field.split(".");t&&y&&i[t]?.[y]!==void 0?i[n.field]=i[t][y]:i[n.field]===void 0&&(i[n.field]="")}}),G(a),U(i),v&&v("edit",i,a)}catch{}},[_,v,P]);const we=o.useCallback(async()=>{if(z!==null)try{P?await P(u):v&&await v("save",u,z),G(null),U({})}catch{}},[z,u,v,P]),Se=o.useCallback(()=>{G(null),U({})},[]),M=(s,a)=>{U(i=>{const n={...i};if(s.includes(".")){const[t,...y]=s.split("."),r=y.pop();n[t]||(n[t]={});let d=n[t];for(const O of y)d[O]||(d[O]={}),d=d[O];d[r]=a,n[s]=a}else n[s]=a;return n})},te=(s,a,i,n)=>{n?.stopPropagation(),R(null),v?.(s,a,i)},se=async()=>{if(v&&T.row)try{await v("delete",T.row,T.rowIndex),I({isOpen:!1,row:null,rowIndex:null})}catch{}else I({isOpen:!1,row:null,rowIndex:null})},ae=()=>{I({isOpen:!1,row:null,rowIndex:null})},ke=se,Ee=ae,$e=()=>{const s=[];let i=1,n=B;if(B>5){const t=Math.floor(2.5),y=Math.ceil(5/2)-1;N<=t?n=5:N+y>=B?i=B-5+1:(i=N-t,n=N+y)}for(let t=i;t<=n;t++)s.push(e.jsx("button",{onClick:()=>W(t),className:`pagination-button ${N===t?"active":""}`,disabled:g,children:t},t));return s},Pe=(s,a)=>!A||p.length===0?null:e.jsxs("div",{className:"action-menu-container",ref:X,children:[e.jsx("button",{className:"action-menu-button",onClick:i=>{i.stopPropagation(),R(H===a?null:a)},onContextMenu:i=>{i.preventDefault(),R(H===a?null:a)},"aria-label":"Actions","aria-haspopup":"true","aria-expanded":H===a,children:e.jsx(Z,{})}),H===a&&e.jsx("div",{className:"action-menu",role:"menu","aria-orientation":"vertical","aria-labelledby":`action-button-${a}`,children:p.map(i=>(m[i]?.type||Z,e.jsxs("button",{className:`action-menu-item ${i}`,onClick:n=>te(i,s,a,n),onKeyDown:n=>{n.key==="Enter"||n.key===" "?(n.preventDefault(),te(i,s,a,n)):n.key==="Escape"&&(n.stopPropagation(),R(null))},role:"menuitem",tabIndex:"0",children:[e.jsx("span",{className:"action-icon",children:m[i]}),e.jsx("span",{className:"action-label",children:k[i]||i})]},i)))})]}),Ae=(s,a)=>e.jsx("div",{className:"actions-cell",children:Pe(s,a)}),Y=o.useMemo(()=>{let s=[];return _&&_.length>0?s=[..._]:D&&D.length>0&&(s=Object.keys(D[0]).filter(a=>a!=="id"&&a!=="_id").map(a=>({field:a,header:a.charAt(0).toUpperCase()+a.slice(1).replace(/([A-Z])/g," $1").trim(),width:"auto",...a.toLowerCase().includes("status")?{render:i=>e.jsx("div",{className:"status-cell","data-status":i?.toLowerCase?.()||"",children:i||""})}:{}}))),A&&s.push({field:"actions",header:"Actions",width:"100px",render:(a,i,n)=>Ae(i,n)}),s},[C,h,A]);o.useCallback((s,a)=>{a.stopPropagation(),!(a.target.closest(".action-btn")||a.target.closest("button")||a.target.closest("a"))&&$&&$(s)},[$]);const Me=(s,a)=>{const i=z===a,n=`row-${a}`;return e.jsxs("tr",{className:`table-row fade-in ${$?"clickable":""} ${J.some(t=>t.id===s.id)?"selected":""} ${i?"editing":""}`,children:[w&&e.jsx("td",{className:"selection-cell",children:e.jsx("input",{type:"checkbox",checked:J.some(t=>t.id===s.id),onChange:t=>{t.stopPropagation(),handleRowSelection(s,t.target.checked)}})}),Y.map((t,y)=>{if(t.field==="actions"&&A){const r=`actions-${a}`;return e.jsx("td",{className:"actions-column",children:i?e.jsxs("div",{className:"actions-cell",children:[e.jsx("button",{className:"action-button save",onClick:d=>{d.stopPropagation(),we()},title:"Save",children:e.jsx(ne,{})},`save-${a}`),e.jsx("button",{className:"action-button cancel",onClick:Se,title:"Cancel",children:e.jsx(re,{})},`cancel-${a}`)]}):e.jsx("div",{className:"actions-cell",children:e.jsx("button",{className:"action-menu-button",onClick:d=>{d.stopPropagation(),S&&S(d,s,a)},"aria-label":"Actions",children:e.jsx(Z,{size:14})},`menu-${a}`)})},r)}return t.field==="actions"&&!A?null:e.jsx("td",{className:`${t.className||""} ${i?"editing":""}`,style:{...t.width&&{width:t.width},...t.align&&{textAlign:t.align},...t.style||{}},children:i&&t.editable!==!1&&z===a&&t.field&&t.field!=="actions"?t.type==="checkbox"?e.jsx("div",{className:"checkbox-wrapper",children:e.jsx("input",{type:"checkbox",checked:!!x(u,t.field),onChange:r=>M(t.field,r.target.checked),className:"edit-input",onClick:r=>r.stopPropagation()})}):t.type==="select"&&t.options?e.jsxs("select",{value:t.formatForEdit?t.formatForEdit(x(u,t.field),u):x(u,t.field)||"",onChange:r=>{const d=t.parseFromEdit?t.parseFromEdit(r.target.value,u):r.target.value;M(t.field,d)},className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation(),children:[t.placeholder&&e.jsx("option",{value:"",children:t.placeholder}),t.options.map(r=>e.jsx("option",{value:r.value,disabled:r.disabled,children:r.label||r.value},r.value))]}):t.type==="date"?e.jsx("input",{type:"date",value:t.formatForEdit?t.formatForEdit(x(u,t.field),u):x(u,t.field)||"",onChange:r=>{const d=t.parseFromEdit?t.parseFromEdit(r.target.value,u):r.target.value;M(t.field,d)},className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation()}):t.type==="time"?e.jsx("input",{type:"time",value:t.formatForEdit?t.formatForEdit(x(u,t.field),u):x(u,t.field)||"",onChange:r=>{const d=t.parseFromEdit?t.parseFromEdit(r.target.value,u):r.target.value;M(t.field,d)},className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation()}):t.type==="time12"?e.jsx(Ve,{value:t.formatForEdit?t.formatForEdit(x(u,t.field),u):x(u,t.field)||"",onChange:r=>{const d=t.parseFromEdit?t.parseFromEdit(r,u):r;M(t.field,d)},placeholder:"Select time"}):t.type==="number"?e.jsx("input",{type:"number",value:x(u,t.field)||"",onChange:r=>M(t.field,parseInt(r.target.value)||0),className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation(),min:t.min||1,max:t.max||100}):t.type==="time-range"?e.jsx("input",{type:"text",value:x(u,t.field)||"",onChange:r=>{const d=r.target.value;(/^\s*\d{1,2}:?\d{0,2}\s*[AP]?M?\s*-?\s*\d{0,2}:?\d{0,2}\s*[AP]?M?\s*$/.test(d)||d==="")&&M(t.field,d)},className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation(),placeholder:"e.g., 9:00 AM - 10:00 AM"}):t.readOnly?e.jsx("div",{className:"read-only-cell",children:x(u,t.field)||""}):e.jsx("input",{type:t.type||"text",value:x(u,t.field)||"",onChange:r=>M(t.field,r.target.value),className:"edit-input",style:{width:"100%"},onClick:r=>r.stopPropagation(),step:t.type==="number"?t.step||"any":void 0,min:t.min,max:t.max,placeholder:t.placeholder||`Enter ${t.header||t.field}`,disabled:t.disabled}):t.render?t.render(x(s,t.field),s,a):e.jsx("div",{className:`cell-content ${t.field?.toLowerCase()?.includes("status")?"status-cell":""}`,"data-status":t.field?.toLowerCase()?.includes("status")?(()=>{try{const r=x(s,t.field)||"";return String(r).toLowerCase()}catch{return""}})():void 0,children:t.format?t.format(x(s,t.field),s):(()=>{try{const r=x(s,t.field);return r!=null?String(r):""}catch{return""}})()})},t.key||t.field||y)})]},n)},De=()=>g?null:K.length?K.map((s,a)=>Me(s,a)):e.jsx("tr",{children:e.jsx("td",{colSpan:Y.length+(w?1:0),className:"no-data",children:"No data available"})});return e.jsxs("div",{className:`data-table-container ${L}`,children:[T.isOpen&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h3",{children:"Confirm Delete"}),e.jsxs("p",{children:["Are you sure you want to delete"," ",T.row?`"${T.row.title||"this item"}"`:"this item","? This action cannot be undone."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:ae,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:se,className:"btn btn-danger",children:"Delete"})]})]})}),e.jsxs("div",{className:"table-box",children:[e.jsxs("div",{className:"data-table-header",children:[e.jsx("h3",{className:"data-table-title",children:j}),e.jsxs("div",{className:"table-controls",children:[f&&E&&e.jsx("button",{className:"refresh-button",onClick:E,disabled:g,"aria-label":"Refresh table",children:g?e.jsx(Oe,{size:8,message:""}):e.jsx("span",{children:"Refresh"})}),w&&J.length>0&&e.jsxs("span",{className:"selected-count",children:[J.length," selected"]})]})]}),e.jsx("div",{className:"table-responsive",ref:be,children:g?e.jsx(qe,{}):e.jsxs("table",{className:"data-table",role:"table","aria-label":j||"Data table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[w&&e.jsx("th",{className:"selection-header",scope:"col","aria-label":"Select row",children:e.jsx("input",{type:"checkbox",checked:J.length===K.length&&K.length>0,onChange:handleSelectAll,"aria-label":"Select all rows"})}),Y.map((s,a)=>e.jsx("th",{className:`${s.className||""} ${s.field&&s.field!=="actions"?"sortable":""}`,style:{...s.width&&{width:s.width},...s.align&&{textAlign:s.align},...s.style||{}},onClick:()=>Ne(s.field),scope:"col","aria-sort":s.field&&s.field!=="actions"&&b.field===s.field?b.direction==="asc"?"ascending":"descending":"none","aria-label":`${s.header||s.title}${s.field&&s.field!=="actions"?", click to sort":""}`,children:e.jsxs("div",{className:"header-content",children:[e.jsx("span",{className:"header-text",children:s.header||s.title}),s.field&&s.field!=="actions"&&e.jsx("span",{className:"sort-icon-container","aria-hidden":"true",children:ye(s.field)})]})},s.key||s.field||a))]})}),e.jsx("tbody",{children:De()})]})})]}),e.jsxs("div",{className:"pagination",role:"navigation","aria-label":"Table pagination",children:[e.jsxs("div",{className:"records-per-page",children:[e.jsx("span",{children:"Show"}),e.jsx("select",{className:"records-select",value:F,onChange:Ce,disabled:g,"aria-label":"Number of entries per page",children:V.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("span",{children:"entries"})]}),e.jsxs("div",{className:"pagination-info",children:["Showing ",h.length?(N-1)*F+1:0," to"," ",Math.min(N*F,h.length)," of ",h.length," ","entries"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-button pagination-arrow",onClick:()=>W(N-1),disabled:N===1||g,title:"Previous page","aria-label":"Go to previous page",children:"‹"}),$e(),e.jsx("button",{className:"pagination-button pagination-arrow",onClick:()=>W(N+1),disabled:N===B||g,title:"Next page","aria-label":"Go to next page",children:"›"})]})]}),e.jsx(Le,{isOpen:T.isOpen,onClose:Ee,onConfirm:ke,title:"Confirm Delete",message:"Are you sure you want to delete this item? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"btn-danger"})]})};oe.propTypes={title:c.string,columns:c.arrayOf(c.object).isRequired,data:c.array.isRequired,loading:c.bool,onRefresh:c.func,onRowClick:c.func,actions:c.arrayOf(c.string),onAction:c.func,showRefresh:c.bool,showActions:c.bool,className:c.string,pageSizeOptions:c.arrayOf(c.number),defaultPageSize:c.number,actionIcons:c.object,actionLabels:c.object,enableRowSelection:c.bool,onSelectionChange:c.func,onEdit:c.func,onDelete:c.func,editingRow:c.number,editingData:c.object,setEditingRow:c.func,setEditingData:c.func};const Ye=Fe.memo(oe);export{Ye as D,We as S};
